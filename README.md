# Socket Client GUI

这是一个使用 Python Tkinter 构建的功能丰富的图形化 Socket 客户端。

## 主要功能

### 基础功能
- 连接到指定的服务器地址和端口
- 发送和接收文本消息
- 显示连接状态和时间戳
- 清空接收和状态区域
- 使用 `Ctrl+Enter` 快捷键发送消息

### 编码支持
- **多种编码格式支持**：UTF-8、GBK、GB2312、ASCII、Latin-1
- **智能编码处理**：
  - 发送时使用选择的编码格式
  - 接收时自动使用相同编码格式解码
  - 编码失败时提供错误提示和自动降级处理
- **编码状态显示**：发送消息时显示使用的编码格式

### 文件传输功能
- **文件发送模式**：支持文本消息和文件传输两种模式切换
- **文件选择**：提供文件浏览器选择要发送的文件
- **文件传输协议**：
  - 文件头包含：标识符 + 文件名长度 + 文件名 + 文件大小
  - 分块传输：每次4KB，适合大文件传输
- **进度显示**：实时显示文件发送进度
- **文件大小限制**：默认10MB上限，超出时给出警告提示
- **支持的文件类型**：所有文件类型（二进制安全传输）

### 错误处理
- **连接错误处理**：连接超时、拒绝连接、网络错误等
- **编码错误处理**：编码/解码失败时的降级处理
- **传输错误处理**：网络中断、连接重置等异常情况
- **文件错误处理**：文件不存在、读取权限等问题


## 文件传输协议

客户端发送文件时使用以下协议格式：

```
[文件头部分]
- "FILE_TRANSFER:" (ASCII编码的标识符)
- 文件名长度 (4字节无符号整数)
- 文件名 (使用选择的编码格式)
- 文件大小 (8字节无符号长整数)

[文件内容部分]
- 文件的二进制内容（分4KB块发送）
```

服务器端需要实现相应的接收协议来正确处理文件传输。

## 技术特性

- **多线程设计**：连接和消息接收在独立线程中进行，避免界面冻结
- **异步UI更新**：使用 `master.after()` 确保线程安全的UI更新
- **资源管理**：正确处理Socket连接的创建和释放
- **用户体验**：丰富的状态提示和错误信息
- **可扩展性**：模块化设计，易于添加新功能

## 运行要求

- Python 3.6+
- Tkinter（通常随Python一起安装）
- 标准库：socket, threading, datetime, os, struct

## 如何运行

```bash
python socket_client.py
```
